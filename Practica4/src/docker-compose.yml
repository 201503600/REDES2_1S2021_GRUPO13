version: '3.5'

services: 
  mongo-container:
    container_name: mongo-container
    image: mongo:latest
    volumes:
      - /dataMongo:/data/db
    ports:
      - "27017"
    networks:
      db_network:
        ipv4_address: 10.10.13.10

  servidor1:
    container_name: servidor1
    build: ./server/
    ports: 
      - '3001:3001'
    environment: 
      PORT_1: 3001
      CARNET_1: "201020126"
    networks:
      service_network:
        ipv4_address: 172.35.73.10
      db_network:
        ipv4_address: 10.10.13.20
  
  servidor2:
    container_name: servidor2
    build: ./server2/
    ports: 
      - '3002:3002'
    environment: 
      PORT_1: 3002
      CARNET_2: "201503600"
    networks:
      service_network:
        ipv4_address: 172.35.73.20
      db_network:
        ipv4_address: 10.10.13.30

  servidor3:
    container_name: servidor3
    build: ./server3/
    ports: 
      - '3003:3003'
    environment: 
      PORT_1: 3003
      CARNET_3: "201504231"
    networks:
      service_network:
        ipv4_address: 172.35.73.30
      db_network:
        ipv4_address: 10.10.13.40

networks:
  db_network:
    driver: bridge
    ipam:
      driver: default
      config:
        - subnet: 10.10.13.0/24

  service_network:
    driver: bridge
    ipam:
      driver: default
      config:
        - subnet: 172.35.73.0/24



